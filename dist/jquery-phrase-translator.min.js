!function(t,n){"use strict";function e(n){var e=this;this.phrases=this.phrases||{},this.options=t.extend({languageId:"en",altLanguageId:"en",fileName:"phrases.xml",attrList:["title","alt","placeholder"],debug:!0},n),this._mutationCopies={append:t.fn.append,appendTo:t.fn.appendTo,prepend:t.fn.prepend,before:t.fn.before,after:t.fn.after,html:t.fn.html,prop:t.fn.prop},t.fn.append=function(){return e._mutation(this,"append",arguments)},t.fn.appendTo=function(){return e._mutation(this,"appendTo",arguments)},t.fn.prepend=function(){return e._mutation(this,"prepend",arguments)},t.fn.before=function(){return e._mutation(this,"before",arguments)},t.fn.after=function(){return e._mutation(this,"after",arguments)},t.fn.html=function(){return e._mutation(this,"html",arguments)},t.fn.prop=function(){return e._mutation(this,"prop",arguments)},this._mutation=function(n,e,a){var s,i,r,o=!0,h="prop"==e&&(2==a.length||t.isPlainObject(a[0]));if(h)for(r={},s=0;s<this.options.attrList.length;s++)i=this.options.attrList[s],r[i]=this._mutationCopies[e].apply(n,[i]);var p=this._mutationCopies[e].apply(n,a);if(h)for(o=!1,s=0;s<this.options.attrList.length;s++)if(i=this.options.attrList[s],r[i]!==this._mutationCopies[e].apply(n,[i])){o=!0;break}if(o){var u=t(n);this.translateElement(u),this._translateAll(u)}return p},this._isPhraseCode=function(t){return t?"#"==t.charAt(0):!1},this._translatePhraseCode=function(t){return this._isPhraseCode(t)?this.phrases[t.slice(1)]:""},this._translateAll=function(n){n=n?n.find("[lang]"):t(":not(html)[lang]"),n.each(function(){e.translateElement(t(this))})},this.translateElement=function(t){if(t.attr("lang")){var n=t.data("phrase-translator")||{},e="",a=!1;if(t.is("input"))switch(t.attr("type")){case"button":case"submit":case"reset":e=t.val(),a=!0}else{var s=t.contents().filter(function(){return 3===this.nodeType}).first();e=s.text()}this._isPhraseCode(e)&&(n.contents=e);var i=this._translatePhraseCode(n.contents);i&&(a?t.val(i):t.text(i));for(var r=0;r<this.options.attrList.length;r++){var o=this.options.attrList[r];e=t.attr(o),this._isPhraseCode(e)&&(n[o]=e),i=this._translatePhraseCode(n[o]),i&&t.attr(o,i)}t.data("phrase-translator",n)}},this.select=function(n,e){this.options.languageId=n,this.options.altLanguageId=e||this.options.altLanguageId||"en";var a=this;n=this.options.languageId,e=this.options.altLanguageId,t.ajax({url:this.options.fileName,contentType:"application/x-www-form-urlencoded;charset=iso-8859-1",success:function(s){t(s).find("phrase").each(function(){var s=t(this).attr("id"),i=t(this).find(n).text();!i&&e&&(i=t(this).find(e).text(),console.log('"'+s+'" not found in language "'+n+'". Used "'+i+'" from "'+e+'" instead')),a.phrases[s]=i}),a._translateAll()},error:function(t){console.log("Error loading "+a.options.fileName+". Error="+t.statusText)}})},t(function(){e.select(e.options.languageId,e.options.altLanguageId)})}n.PhraseTranslator=e}(jQuery,this,document);